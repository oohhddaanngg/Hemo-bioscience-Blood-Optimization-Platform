Blood Optimization Platform — Comprehensive Reference Briefing (Stable)
Purpose: A permanent reference for developers and collaborators. This document captures the why and what of the platform—business context, constraints, logic, and architecture—without any progress notes, timelines, or version status.
Audience: Engineers, data/operations staff, and AI copilots working on the Blood Optimization Platform.

Executive Summary
The Blood Optimization Platform is a web-based inventory management and optimization system for Hemo bioscience, Inc. Its goal is to reduce RBC purchases and waste by optimizing the ordering, sharing, and allocation of human red blood cells (RBCs)—an expensive, perishable resource with a 77-day maximum usable lifespan in Alsever’s.

Business Context
Products Requiring RBCs
Standing Order Products (fixed cadence; e.g., Hemo-QC, MQC, Korea FFMU, C3 Control)


Proficiency Testing (PT) Events (time-bound, customer programs)


Costs and Risks Without Optimization
$100K+ annually in avoidable purchases


Wastage from expired/unused RBCs


Missed sharing between compatible specs and overlapping windows


Core Solution
Identify cross-use opportunities for RBC units ordered for one purpose to serve additional standing orders or PT events, subject to:
Temporal constraints (bleed/ship/expiration windows)


Compatibility (ABO/Rh; antigen phenotype rules)


Manufacturing buffer (minimum 10 days pre-ship)


Fixed schedules (PT event timing is immutable for planning)



Technical Architecture
Platform: Single-page application (SPA)


Stack: HTML5 / CSS3 / Vanilla JavaScript


Storage: Chrome File System Access API (no backend)


Data: CSV for all persistent data


Packaging: Single HTML file containing all logic and UI


Primary Modules
Manufacturing Calendar — Blood deliveries & production schedule


Master Schedule — PT events & required specs


BUP Generator — Blood Usage Proposal engine


Sharing Algorithm — Cross-product sharing discovery


Decision & Activity Logs — Auditable history of choices/actions


Inventory & Data Manager — Specs, quantities, persistence


Future Specifications — Planning and optimization of upcoming PT events



Core Business Logic (Authoritative Rules)
1) The 77-Day Rule
RBCs hemolyze at 78 days in Alsever’s.


Standard plan: Expiration − 70 days = bleed date.


Optimization may extend usability to 77 days before expiration.


2) Event Window (Per-Event)
Earliest acceptable: Bleed − 7 days


Validation: Cross-check against Expiration − 77 days


Latest acceptable: Ship − 10 days (manufacturing buffer)


The sharing algorithm must honor these windows for both sources and targets.
3) Blood Type Matching
Default: Exact ABO/Rh match.


Blank ABO/Rh: Accept ANY type.


Blank antigens: Accept ANY phenotype.


Special cases:


DAT Negative: ANY ABO/Rh acceptable


DAT IgG Positive: ANY ABO, RhD+ required


C3 Control: O Pos or O Neg acceptable


4) Priority Model
Standing Orders first (unused overage = wasted)


PT events second (fixed schedules)


Within each tier, prioritize by logistics/proximity


5) Allocation Rules
No double allocation — A unit’s available volume can’t be consumed twice.


Normal allocation (allowed): One unit may serve multiple samples within the same event.


Self-sharing (prohibited): An event cannot act as donor to itself in PT-to-PT logic.


Multi-unit cohorts: If multiple units are required, phenotypes must match across all units when antigens are specified; “as measured” antigens must be consistent across the cohort.


6) BUP Output
Proposals should report ranges (min→max overage/volume) rather than single fixed values.


7) Standing-Order Cell Identification
Allocations must record the specific cell used (e.g., HQC-1, HQC-2, HQC-3, C3-1, MQC-1, Korea-1/2/3, etc.).



Reference Data Structures
Allocation Ledger (Authoritative Shape)
APP_STATE.allocations = [{
  id: string,
  source_id: string,
  source_kind: 'standing_order' | 'pt_event',
  target_id: string,
  event_from: string,   // donor event key
  event_to: string,     // recipient event key
  units: number,        // count of units allocated
  volume_min: number,   // mL
  volume_max: number,   // mL
  cohort_vector: object,          // phenotype used/required
  compatibilityReport: object,    // detailed checks & flags
  window_ok: boolean,             // temporal feasibility
  priority_tier: number,          // 1 = standing order, 2 = PT
  reason: string                  // acceptance/rejection rationale
}];

Decision Log
APP_STATE.decisions = [{
  timestamp: string,  // ISO 8601
  user: string,
  type: string,       // e.g., "allocation","rejection","edit"
  summary: string,
  context: object     // structured details for audit
}];

Future Specifications (Data Shape)
APP_STATE.futureSpecs = {
  entries: [],   // spec objects for planned events
  versions: {},  // version history per key
  metadata: {}   // indexed by customer_event_year
};

Antigen/Antibody Representation
Antigens: [{ antigen: 'K', status: 'Positive' }, ...]


Antibodies: ['Anti-D', 'Anti-K', ...]


DAT status: "Positive" | "Negative"



Standing Orders — Compatibility Reference (Summary)
Use these to check standing-order cell matching and to label allocations with the exact cell (e.g., HQC-2).
C3 Control: 2u q28d (1 held + 1 backup if available). C3-1 cell = O (RhD+ or RhD−; others flexible).


Hemo-QC (q28d):


HQC-1: AsubB Pos (RhD+ required; others flexible)


HQC-2: O Pos, R1r, Fya− (Rh fixed: D+, C+, E−, c+, e+; Fy(a−))


HQC-3: A1 Neg, rr (Rh fixed: D−, C−, E−, c+, e+)


MQC / MQC-CAT (q35d):


MQC-1: A1B Pos


MQC-2: O Neg, rr, K+ (D−, K+)


Korea FFMU / Mirrscitech (q28d):


Korea-1: A1 Pos, R1R1 (A1, D+, C+, E−, c−, e+)


Korea-2: B Pos, R2R2 (D+, C−, E+, c+, e−)


Korea-3: O Neg, rr (D−, C−, E−, c+, e+)



Schedule Constraints (Non-Negotiables)
PT event schedules are fixed for planning—do not assume rescheduling.


Ship and expiration dates are immutable planning inputs.


Sharing must fit into existing timelines using the event windows described above.



Example (Illustrative Only)
ISLA – 3rd Event 2025
Needs: 2 units A Pos


Event expiration: Nov 10, 2025


Optimal bleed: Sep 1, 2025


Acceptable window: Aug 25 – Oct 21, 2025


Potential sources could include standing orders or other PT events in that window (e.g., HQC late-Aug, Korea early-Sep) if type/phenotype match and buffers are met.
All sharing must remain within these fixed schedules and windows.

Data & Persistence Conventions
CSV is the source of truth for specs, quantities, schedules.


Ensure idempotent loads and safe merges; avoid duplicate allocations.


Maintain directories: /data/, /backups/, /exports/, /logs/.


All changes must be auditable via the Decision Log and, where relevant, the Allocation Ledger.



Contribution & Review Principles
Treat this briefing as authoritative on logic/constraints.


Any change to business rules must be documented and reviewed with the project lead.


All code changes should be accompanied by:


Rationale linked to these rules


Tests validating windows, compatibility, and allocation integrity


Decision/Activity log entries for significant actions



Why This Matters
Every successful share avoids:
$300–$500 in incremental RBC purchases per unit


2–3 hours of technician effort


Waste of human blood that could benefit patients elsewhere


The platform safeguards cost, time, and clinical resources while operating under strict biological and scheduling constraints.

Project Lead: Matt Hukill, PhD, MS, MBA, MLS(ASCP) SBB
 Company: Hemo bioscience, Inc. — Research Triangle Park, NC
